<% if (_.find(databases, { name: 'mariadb'})) { %>
{{/*
Calculate mariadb_url
*/}}
{{- define "<%- name %>.mariadb_url" }}
{{- $mariadb := .Values.config.mariadb }}
{{- if $mariadb.internal }}
{{- $credentials := (printf "%s:%s" $mariadb.username $mariadb.password) }}
{{- printf "jdbc:mysql://%s@%s-mariadb:3306/%s" $credentials (include "<%- name %>.fullname" . ) $mariadb.database }}
{{- else }}
{{- if $mariadb.url }}
{{- printf $mariadb.url }}
{{- else }}
{{- printf "jdbc:mysql://%s@%s:%s/%s" $credentials $mariadb.host $mariadb.port $mariadb.database }}
{{- end }}
{{- end }}
{{- end }}<% } %>